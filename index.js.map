{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';  \n\nconst API_KEY = '11539560-6ff438bd7cc613d70e4d35abc';  \nconst BASE_URL = 'https://pixabay.com/api/';  \nlet currentPage = 1;  \nlet currentQuery = '';\n\nexport async function fetchImages(query) {  \n  const params = {  \n    key: API_KEY,  \n    q: query,  \n    image_type: 'photo',  \n    orientation: 'horizontal',  \n    safesearch: true,  \n    page: currentPage,\n    per_page: 40,\n  };  \n\n  const url = `${BASE_URL}?${new URLSearchParams(params)}`;  \n\n  try {  \n    const response = await axios.get(url);  \n    return response.data;\n  } catch (error) {  \n    console.error('Error fetching data from Pixabay API:', error);  \n    throw error; \n  }  \n}  \n\n\nexport function resetPage() {  \n  currentPage = 1;  \n}  \n\nexport function incrementPage() {  \n  currentPage += 1;  \n}  \n\nexport function setQuery(query) {  \n  currentQuery = query;  \n}  \n\nexport function getCurrentQuery() {  \n  return currentQuery;  \n}\n","import SimpleLightbox from 'simplelightbox';  \nimport 'simplelightbox/dist/simple-lightbox.min.css';  \n\nlet lightbox; \n\nfunction initializeLightbox() {  \n  lightbox = new SimpleLightbox('.gallery a', {  \n    captionsData: 'alt',  \n    captionDelay: 250,  \n    captionPosition: 'bottom',  \n    overlayOpacity: 1,  \n    showCounter: false,  \n  });  \n}  \n\nexport function renderGallery(images) {  \n  const gallery = document.querySelector('#gallery');  \n  const markup = images.map(createGalleryItem).join('');  \n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {  \n    initializeLightbox();\n  } else {  \n    lightbox.refresh();\n  }  \n}  \n\nfunction createGalleryItem({  \n  largeImageURL,  \n  webformatURL,  \n  tags,  \n  likes,  \n  views,  \n  comments,  \n  downloads,  \n}) {  \n  return `  \n    <a href=\"${largeImageURL}\" class=\"gallery-item\">  \n      <img src=\"${webformatURL}\" alt=\"${tags}\" />  \n      <div class=\"image-info\">  \n        <p><strong>Likes</strong> ${likes}</p>  \n        <p><strong>Views</strong> ${views}</p>  \n        <p><strong>Comments</strong> ${comments}</p>  \n        <p><strong>Downloads</strong> ${downloads}</p>  \n      </div>  \n    </a>`;  \n}\n\n","import { fetchImages, resetPage, incrementPage, setQuery, getCurrentQuery } from './js/pixabay-api.js';  \nimport { renderGallery } from './js/render-functions.js';  \nimport iziToast from 'izitoast';  \nimport 'izitoast/dist/css/iziToast.min.css';  \n\nconst refs = {  \n  form: document.querySelector('#search-form'),  \n  input: document.querySelector('#search-input'),  \n  loader: document.querySelector('#loader'),  \n  gallery: document.querySelector('#gallery'),  \n  loadMoreButton: document.querySelector('.load-more-button'),  \n};  \n\nrefs.form.addEventListener('submit', handleFormSubmit);  \nrefs.loadMoreButton.addEventListener('click', handleLoadMore);  \n\nasync function handleFormSubmit(event) {  \n  event.preventDefault();  \n  const query = refs.input.value.trim();  \n\n  if (!query) {  \n    showError('Please enter a search term!');  \n    clearGallery();  \n    return;  \n  }  \n\n  resetPage();  \n  setQuery(query);  \n  clearGallery();  \n\n  showLoader();  \n\n  try {  \n    const data = await fetchImages(query);  \n    handleImageFetchResponse(data);  \n  } catch (error) {  \n    showError('Something went wrong! Please try again later.');  \n  } finally {  \n    hideLoader();  \n  }  \n\n  refs.input.value = '';  \n}  \n\nasync function handleLoadMore() {  \n  const query = getCurrentQuery();  \n  incrementPage();  \n\n  showLoader();  \n\n  try {  \n    const data = await fetchImages(query);  \n    handleImageFetchResponse(data);  \n  } catch (error) {  \n    showError('Something went wrong! Please try again later.');  \n  } finally {  \n    hideLoader();  \n  }  \n}  \n\nfunction handleImageFetchResponse(data) {  \n  const { hits, totalHits } = data;  \n\n  if (hits.length === 0) {  \n    showInfo('Sorry, there are no images matching your search query. Please try again!');  \n    refs.loadMoreButton.classList.add('hidden');  \n    return;  \n  }  \n\n  renderGallery(hits);  \n  refs.loadMoreButton.classList.remove('hidden');  \n\n  if (hits.length < 40 || totalHits <= refs.gallery.children.length) {  \n    refs.loadMoreButton.classList.add('hidden');  \n    showInfo(\"We're sorry, but you've reached the end of search results.\");  \n  }  \n\n  scrollToNewItems();  \n}  \n\nfunction showLoader() {  \n  refs.loader.classList.remove('hidden');  \n}  \n\nfunction hideLoader() {  \n  refs.loader.classList.add('hidden');  \n}  \n\nfunction showError(message) {  \n  iziToast.error({  \n    title: 'Error',  \n    message,  \n    position: 'topRight',  \n    timeout: 2000,  \n  });  \n}  \n\nfunction showInfo(message) {  \n  iziToast.info({  \n    title: '',  \n    message,  \n    position: 'topRight',  \n    timeout: 3000,  \n  });  \n}  \n\nfunction clearGallery() {  \n  refs.gallery.innerHTML = '';  \n}  \n\nfunction scrollToNewItems() {  \n  const { height: cardHeight } = refs.gallery.firstElementChild.getBoundingClientRect();  \n  window.scrollBy({  \n    top: cardHeight * 2,  \n    behavior: 'smooth',  \n  });  \n}\n\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","fetchImages","query","params","url","axios","error","resetPage","incrementPage","setQuery","getCurrentQuery","lightbox","initializeLightbox","SimpleLightbox","renderGallery","images","gallery","markup","createGalleryItem","largeImageURL","webformatURL","tags","likes","views","comments","downloads","refs","handleFormSubmit","handleLoadMore","event","showError","clearGallery","showLoader","data","handleImageFetchResponse","hideLoader","hits","totalHits","showInfo","scrollToNewItems","message","iziToast","cardHeight"],"mappings":"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"}